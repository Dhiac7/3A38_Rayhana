{% extends 'baseAdmin.html.twig' %}

{% block title %}Cultures Agricoles{% endblock %}

{% block body %}
<div class="container">
    <h2 class="heading">Liste des Cultures Agricoles</h2>
    <div class="text-right mb-3">
        <a href="{{ path('app_culture_agricole_dashboard_new') }}" class="btn btn-primary">
            <i class="fa fa-plus"></i> Ajouter une Culture
        </a>
    </div>

    <table id="cultureTable" class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nom</th>
                <th>Type</th>
                <th>Superficie</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% set start = (currentPage - 1) * 4 %}
            {% set end = start + 4 %}
            {% for culture in cultures|slice(start, end) %}
                <tr>
                    <td>{{ culture.id }}</td>
                    <td>{{ culture.nom }}</td>
                    <td>{{ culture.type }}</td>
                    <td>{{ culture.superficie }} m²</td>
                    <td>
                        <a href="{{ path('app_culture_agricole_dashboard_show', {'id': culture.id}) }}" class="btn btn-info">Voir</a>
                        <a href="{{ path('app_culture_agricole_dashboard_edit', {'id': culture.id}) }}" class="btn btn-warning">Modifier</a>
                        {{ include('culture_agricole/_delete_form.html.twig', {'culture_agricole': culture}) }}
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="5" class="text-center">Aucune culture enregistrée.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <nav class="woocommerce-pagination">
        <ul class="page-numbers">
            {% if currentPage > 1 %}
                <li>
                    <a class="previous page-numbers" href="{{ path('app_culture_agricole_dashboard_index', {'page': currentPage - 1}) }}">
                        <i class="fas fa-angle-left"></i>
                    </a>
                </li>
            {% endif %}

            {% for page in 1..totalPages %}
                <li>
                    {% if page == currentPage %}
                        <span aria-current="page" class="page-numbers current">{{ page }}</span>
                    {% else %}
                        <a class="page-numbers" href="{{ path('app_culture_agricole_dashboard_index', {'page': page}) }}">{{ page }}</a>
                    {% endif %}
                </li>
            {% endfor %}

            {% if currentPage < totalPages %}
                <li>
                    <a class="next page-numbers" href="{{ path('app_culture_agricole_dashboard_index', {'page': currentPage + 1}) }}">
                        <i class="fas fa-angle-right"></i>
                    </a>
                </li>
            {% endif %}
        </ul>
    </nav>
    <div>________</div>
</div>



  <script>
//tri 
        $(document).ready(function () {
            $('#cultureTable').DataTable({
                "ordering": true,  // tri 3al colonne
                "paging": false,    // nactiviw l pagination
                "searching": true, // nactiviw l recherche
                "pageLength": 4,   // nbr element par page
                "lengthChange": false, // deactiv ll menu pour modif le nbr d'éléments par page
                "language": {
                     "url": "{{ asset('js/French.json') }}"
                }
            });
        });
    </script>
{% endblock %}
